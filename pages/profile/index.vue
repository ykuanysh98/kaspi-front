<script setup>
import { useUserStore } from '~/stores/user'

const userStore = useUserStore()

// –ê–¥–º–∏–Ω –µ–∫–µ–Ω–¥—ñ–≥—ñ–Ω –∞–Ω—ã“õ—Ç–∞—É
const isAdmin = computed(() => userStore.user?.role === 'admin')

// –õ–æ–≥–∞—É—Ç —Ñ—É–Ω–∫—Ü–∏—è—Å—ã
const logout = () => {
  userStore.clearToken()
  clearCart()
  router.push('/login')
}
</script>

<template>
  <div class="max-w-lg mx-auto p-6 bg-white rounded-xl shadow">
    <h1 class="text-2xl font-bold mb-6">üë§ –ú–µ–Ω—ñ“£ –ø—Ä–æ—Ñ–∏–ª—ñ–º</h1>

    <!-- –ö–Ω–æ–ø–∫–∞–ª–∞—Ä (–∂–æ“ì–∞—Ä—ã–¥–∞) -->
    <div class="mb-6 flex gap-3">
      <!-- –ê–¥–º–∏–Ω–≥–µ “ì–∞–Ω–∞: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ -->
      <NuxtLink
        v-if="isAdmin"
        to="/users"
        class="px-3 py-2 rounded-md text-gray-700 hover:text-white hover:bg-blue-600 transition"
      >
        –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
      </NuxtLink>

      <!-- –®—ã“ì—É -->
      <button
        v-if="userStore.token"
        @click="logout"
        class="px-3 py-2 rounded-md text-red-600 font-medium hover:text-white hover:bg-red-600 transition"
      >
        –®—ã“ì—É
      </button>
    </div>

    <!-- –ü—Ä–æ—Ñ–∏–ª—å -->
    <div v-if="userStore.user" class="space-y-2">
      <p><span class="font-semibold">–ê—Ç—ã:</span> {{ userStore.user.name }}</p>
      <p><span class="font-semibold">Email:</span> {{ userStore.user.email }}</p>

      <NuxtLink
        to="/profile/edit"
        class="mt-4 inline-block bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition"
      >
        ”®–∑–≥–µ—Ä—Ç—É
      </NuxtLink>
    </div>

    <div v-else class="text-gray-500">
      –ü—Ä–æ—Ñ–∏–ª—å –º”ô–ª—ñ–º–µ—Ç—Ç–µ—Ä—ñ –∂“Ø–∫—Ç–µ–ª—É–¥–µ...
    </div>
  </div>
</template>

<style scoped>
/* Tailwind –∞—Ä“õ—ã–ª—ã —Å—Ç–∏–ª—å —Ç–æ–ª—ã“õ “õ–æ—Å—ã–ª–¥—ã, “õ–æ—Å—ã–º—à–∞ CSS “õ–∞–∂–µ—Ç –µ–º–µ—Å */
</style>
